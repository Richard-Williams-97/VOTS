{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{scanTextFiles,getFileInfo}from'../StoryTxt/StoryService/FileScannerService.js';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Stories=()=>{const[stories,setStories]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const navigate=useNavigate();useEffect(()=>{loadStories();},[]);const loadStories=async()=>{try{setLoading(true);setError(null);// Scan for text files in the StoryTxt folder\nconst scanResult=await scanTextFiles('./src/StoryTxt/');if(scanResult.success){// Get detailed information for each file\nconst detailedStories=await Promise.all(scanResult.data.files.map(async file=>{const fileInfo=await getFileInfo(file.path);return fileInfo.success?fileInfo.data:null;}));// Filter out any failed file reads\nconst validStories=detailedStories.filter(story=>story!==null);setStories(validStories);}else{setError(scanResult.error.message);}}catch(err){setError(err.message);}finally{setLoading(false);}};const handleStoryClick=story=>{// Navigate to individual story route\nconst storyTitle=story.title.replace(/[^a-zA-Z0-9\\s]/g,'').replace(/\\s+/g,'-').toLowerCase();navigate(`/story/${storyTitle}`);};return/*#__PURE__*/_jsxs(\"div\",{className:\"stories-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stories-page-heading\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Stories\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"stories-grid\",children:stories.map((story,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"story-terminal\",onClick:()=>handleStoryClick(story),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"terminal-header\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"file-path\",children:[\"/\",story.fileName,\".txt\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"file-size\",children:[story.fileSize,\" bytes\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"terminal-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"story-title\",children:story.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"story-stats\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"stat\",children:[\"LINES: \",story.lineCount]}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat\",children:[\"WORDS: \",story.wordCount]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"story-preview\",children:story.firstLine.length>80?`${story.firstLine.substring(0,80)}...`:story.firstLine})]}),/*#__PURE__*/_jsx(\"div\",{className:\"terminal-footer\",children:/*#__PURE__*/_jsx(\"span\",{className:\"access-code\",children:\"ACCESS_READ\"})})]},index))})]});};export default Stories;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","scanTextFiles","getFileInfo","jsx","_jsx","jsxs","_jsxs","Stories","stories","setStories","loading","setLoading","error","setError","navigate","loadStories","scanResult","success","detailedStories","Promise","all","data","files","map","file","fileInfo","path","validStories","filter","story","message","err","handleStoryClick","storyTitle","title","replace","toLowerCase","className","children","index","onClick","fileName","fileSize","lineCount","wordCount","firstLine","length","substring"],"sources":["/Users/verseofthesun/Web/verseofthesun/VOTS/src/Pages/Stories.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { scanTextFiles, getFileInfo } from '../StoryTxt/StoryService/FileScannerService.js';\n\nconst Stories = () => {\n  const [stories, setStories] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    loadStories();\n  }, []);\n\n  const loadStories = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      \n      // Scan for text files in the StoryTxt folder\n      const scanResult = await scanTextFiles('./src/StoryTxt/');\n      \n      if (scanResult.success) {\n        // Get detailed information for each file\n        const detailedStories = await Promise.all(\n          scanResult.data.files.map(async (file) => {\n            const fileInfo = await getFileInfo(file.path);\n            return fileInfo.success ? fileInfo.data : null;\n          })\n        );\n        \n        // Filter out any failed file reads\n        const validStories = detailedStories.filter(story => story !== null);\n        setStories(validStories);\n      } else {\n        setError(scanResult.error.message);\n      }\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleStoryClick = (story) => {\n    // Navigate to individual story route\n    const storyTitle = story.title.replace(/[^a-zA-Z0-9\\s]/g, '').replace(/\\s+/g, '-').toLowerCase();\n    navigate(`/story/${storyTitle}`);\n  };\n\n  \n\n  return (\n    <div className=\"stories-container\">\n      <div className=\"stories-page-heading\">\n        <h1>Stories</h1>\n      </div>\n      <div className=\"stories-grid\">\n        {stories.map((story, index) => (\n          <div \n            key={index} \n            className=\"story-terminal\"\n            onClick={() => handleStoryClick(story)}\n          >\n            <div className=\"terminal-header\">\n              <span className=\"file-path\">/{story.fileName}.txt</span>\n              <span className=\"file-size\">{story.fileSize} bytes</span>\n            </div>\n            <div className=\"terminal-content\">\n              <div className=\"story-title\">{story.title}</div>\n              <div className=\"story-stats\">\n                <span className=\"stat\">LINES: {story.lineCount}</span>\n                <span className=\"stat\">WORDS: {story.wordCount}</span>\n              </div>\n              <div className=\"story-preview\">\n                {story.firstLine.length > 80 \n                  ? `${story.firstLine.substring(0, 80)}...` \n                  : story.firstLine}\n              </div>\n            </div>\n            <div className=\"terminal-footer\">\n              <span className=\"access-code\">ACCESS_READ</span>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default Stories; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}